# Структура программы libirsample и руководство пользователя

---

## 1. Структура программы

![Структура программы](./irsample_structure.png)

Пример включает следующие модули: **sample**, **camera**, **display**, **temperature** и **cmd**.  
Назначение каждого модуля:

### sample module
После настройки соответствующих параметров в `sample.cpp` модуль вызывает **camera**, чтобы установить соединение с инфракрасной камерой и начать потоковую передачу изображения.  
Далее создаются четыре потока: **stream**, **display**, **temperature** и **cmd**, которые обрабатывают соответствующие данные.

### camera module
Используется для получения данных от инфракрасной камеры.  
Поток **stream** получает исходные кадры и разделяет их на два потока — изображения (**image frame**) и температуры (**temp frame**).  
После обработки модуль возвращает сигнал в поток камеры для продолжения работы.

### display module
После получения кадра изображения выполняет обработку в соответствии с параметрами `frame_info`:  
форматирование данных, отражение, зеркалирование, поворот и т. д.  
Затем отображает результат с помощью **OpenCV**.

### temperature module
После получения температурного кадра обрабатывает его аналогично — выполняет преобразование формата, отражение и поворот.

### cmd module
Отправляет команды в инфракрасную камеру.

---

## 2. Метод компиляции программы

### Windows
В папке `libir_sample` предоставлен проект для **Visual Studio 2019**.  
Для работы примера требуются библиотеки **OpenCV** и **pthreadVC2.dll** (уже включены).

### Linux
В `libir_sample` есть файлы `Makefile` и `CMakeLists.txt`.  
Перед компиляцией необходимо удалить каталог `opencv2` (OpenCV устанавливается отдельно).  
Если OpenCV не используется, закомментируйте строку:

```c
#define OPENCV_ENABLE
